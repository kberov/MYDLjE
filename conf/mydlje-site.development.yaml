---

#This file inherits and overwrites default settings from mydlje.development.yaml
# which can be overwriten by: local.mydlje-site.development.yaml
#Do NOT edit this file! Edit local.mydlje-site.development.yaml instead!

site_name: MYDLjE
#Prepended in front of templates by Mojo
templates_root: templates/site
#get LESS strict
#types:
#  html: 'application/xhtml+xml; charset=utf-8'
plugins:
  alloy_renderer:
    syntax: TT
    template_options:
      TRIM: 1
      #Note: INCLUDE_PATH works only from within templates
      #INCLUDE_PATH is relative to MOJO_HOME(for now).
      INCLUDE_PATH:
        - templates
        - templates/site
      #DEBUG: 1
      PRE_PROCESS:
        - site_pre_process.tt
        - form_macros_pre_process.tt
        - macros_pre_process.tt
        - site_macros_pre_process.tt
      COMPILE_PERL: 2
      LOAD_PERL: 1
      DEFAULT: template_not_found.tt
      ENCODING: 'UTF-8'
      #EVAL_PERL: *true      #use perl in templates only as last resort - not recommended
      PLUGINS:
        PageTree: MYDLjE::Template::PageTree
        PageContent: MYDLjE::Template::PageContent

      POST_CHOMP: '~'
      PRE_CHOMP: '~'
      SEMICOLONS: 0
      SHOW_UNDEFINED_INTERP: 0

test_utf8: 试验,δοκιμή,проба 
#TODO: Site routes

routes:

  /:ui_language/:page_alias/:data_type/:alias:
    order: 111
    #the regexes that must match so a variable is put into stash
    qrs:
      ui_language: '[a-z]{2}'
      page_alias: '[\-_a-zA-Z0-9]{3,255}'
      data_type: '[\w]{3,100}'
      alias: '[\-_a-zA-Z0-9]{3,255}'
    to:
      #these variables will be parsed and put into stash
      action: page
      controller: site
      format: html
      get_list_of_data_type: 0

  /:page_alias/:data_type/:alias:
    order: 111
    #the regexes that must match so a variable is put into stash
    qrs:
      page_alias: '[\-_a-zA-Z0-9]{3,255}'
      data_type: '[\w]{3,100}'
      alias: '[\-_a-zA-Z0-9]{3,255}'
    to:
      #these variables will be parsed and put into stash
      action: page
      controller: site
      format: html
      get_list_of_data_type: 0
  /:ui_language/:page_alias/:data_type:
    order: 112
    #the regexes that must match so a variable is put into stash
    qrs:
      page_alias: '[\-_a-zA-Z0-9]{3,255}'
      data_type: '[\w]{3,100}'
      ui_language: '[a-z]{2}'
    to:
      action: page
      controller: site
      format: html
      get_list_of_data_type: 1
      
  /:page_alias/:data_type:
    order: 112
    #the regexes that must match so a variable is put into stash
    qrs:
      page_alias: '[\-_a-zA-Z0-9]{3,255}'
      data_type: '[\w]{3,100}'
    to:
      action: page
      controller: site
      format: html
      get_list_of_data_type: 1
  /:ui_language/:page_alias:
    #the regexes that must match so a variable is put into stash
    qrs:
      page_alias: '[\-_a-zA-Z0-9]{3,255}'
      ui_language: '[a-z]{2}'
    order: 112
    to:
      action: page
      controller: site
      data_type: note
      get_list_of_data_type: 1
      page_alias: home
      format: html
  /:ui_language:
    order: 112
    qrs:
      ui_language: '[a-z]{2}'
    to:
      action: page
      controller: site
      page_alias: home
      data_type: note
      get_list_of_data_type: 1
      format: html
  /:page_alias:
    #the regexes that must match so a variable is put into stash
    qrs:
      page_alias: '[\-_a-zA-Z0-9]{3,255}'
    order: 113
    to:
      action: page
      controller: site
      data_type: note
      get_list_of_data_type: 1
      page_alias: home
      format: html
  /:
    order: 115
    to:
      action: page
      controller: site
      page_alias: home
      data_type: note
      get_list_of_data_type: 1
      format: html
#routes for t/02_mydlje.t
  /hi:
    order: 90
    to:
      action: hi
      controller: C
      namespace: MYDLjE
      id: 1
  /hi/:id:
    order: 91
    to:
      action: hi
      controller: C
      namespace: MYDLjE
      id: 1
    via:
      - get
      - post
  /c/hi/:id:
    order: 92
    to:
      action: hi
      controller: C
      namespace: MYDLjE
      id: 1

  /hisession:
    order: 90
    to:
      action: hisession
      controller: C
      namespace: MYDLjE
      id: 1
  #the following routes will be sipped because "to:" is empty
  /:action:
    order: 1000
    to: ~
  /:action/:id:
    order: 1001
    to: ~
    via:
      - get
      - post
  /:controller/:action/:id:
    order: 1002
    to: ~
